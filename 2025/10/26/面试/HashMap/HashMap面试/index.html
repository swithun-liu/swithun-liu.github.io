

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title> [ Swithun Blog ]</title>

  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css">
  
  <link rel="stylesheet" href="/lib/highlight-11-9-0/src/styles/atom-one-dark.css">
  
  <link rel="stylesheet" href="/css/again.css">
  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>

  <!-- menu -->
  <div id="menu-outer">
    <div id="menu-inner">
      
      <a class="menu-button" href="/">Home</a>
      
      <a class="menu-button" href="/about">About</a>
      
      <a class="menu-button" href="/contact">Contact</a>
      
      <a class="menu-button" href="/archives">Archives</a>
      
      <a class="menu-button" href="/categories">Category</a>
      
    </div>
  </div>

  <!-- ä¸­é—´ä¸»ä½“ -->
  <div id="main">
    <!-- ä¾§è¾¹æ  -->
    <div id="aside-outer">
      <aside>
        <!-- æœç´¢æ  -->
<div id="search">
    <input class="search-input" type="text" placeholder="search">
    <i id="search-icon" class="fa fa-bars" title="åˆ‡æ¢ç›®å½•ä¸ç´¢å¼•"></i>
</div>

<!-- ä¾§è¾¹ç›®å½•æ  -->
<div id="tree">
    

    

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            Android
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2023/10/18/Android/FragmentåŸç†/">
                            <i class="fa fa-file"></i>
                            FragmentåŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2023/10/10/Android/viewmodelåŸç†/">
                            <i class="fa fa-file"></i>
                            viewmodelåŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/03/03/Android/viewç»˜åˆ¶åŸç†/">
                            <i class="fa fa-file"></i>
                            viewç»˜åˆ¶åŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/03/09/Android/è‡ªå®šä¹‰Viewå®ç°æ‹–æ‹½å±•å¼€é¢æ¿/">
                            <i class="fa fa-file"></i>
                            è‡ªå®šä¹‰Viewå®ç°æ‹–æ‹½å±•å¼€é¢æ¿
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/05/12/Android/NestedScrollingåŸç†/">
                            <i class="fa fa-file"></i>
                            NestedScrollingåŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/05/25/Android/è‡ªå·±å®ç°ä¸€ä¸ªNestedScrollView/">
                            <i class="fa fa-file"></i>
                            è‡ªå·±å®ç°ä¸€ä¸ªNestedScrollView
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/06/02/Android/EditTextå…‰æ ‡å®šä½åŸç†/">
                            <i class="fa fa-file"></i>
                            EditTextå…‰æ ‡å®šä½åŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/06/02/Android/ä¸€æ­¥æ­¥è§£å†³NestedScrollViewåµŒå¥—EditTextçš„å†²çª/">
                            <i class="fa fa-file"></i>
                            ä¸€æ­¥æ­¥è§£å†³NestedScrollViewåµŒå¥—EditTextçš„å†²çª
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/06/11/Android/DialogåŸç†/">
                            <i class="fa fa-file"></i>
                            DialogåŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/07/20/Android/ä»0å®ç°ä¸€ä¸ªBottomSheetDialog/">
                            <i class="fa fa-file"></i>
                            ä»0å®ç°ä¸€ä¸ªBottomSheetDialog
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/08/18/Android/kotlinåç¨‹åŸç†/">
                            <i class="fa fa-file"></i>
                            kotlinåç¨‹åŸç†
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/09/07/Android/textview measureæµç¨‹/">
                            <i class="fa fa-file"></i>
                            textview measureæµç¨‹
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/03/10/Android/Activityçš„å¯åŠ¨æµç¨‹/">
                            <i class="fa fa-file"></i>
                            Activityçš„å¯åŠ¨æµç¨‹
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            ä¸»é¢˜æ¼”ç¤º
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2023/10/10/ä¸»é¢˜æ¼”ç¤º/demo1/">
                            <i class="fa fa-file"></i>
                            demo1
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2023/10/22/ä¸»é¢˜æ¼”ç¤º/temp/">
                            <i class="fa fa-file"></i>
                            temp
                        </a>
                    </li>
                </ul>

              

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            demo_folder_level2
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2023/10/10/ä¸»é¢˜æ¼”ç¤º/demo_folder_level2/demo2/">
                            <i class="fa fa-file"></i>
                            demo2
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            AOSP
                        </a>
                        

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            java
                        </a>
                        

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            lang
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/10/07/AOSP/java/lang/ThreadLocal/">
                            <i class="fa fa-file"></i>
                            ThreadLocal
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/01/04/AOSP/java/lang/Thread/">
                            <i class="fa fa-file"></i>
                            Thread
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            util
                        </a>
                        

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            concurrent
                        </a>
                        

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            ThreadPoolExecutor
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/01/04/AOSP/java/util/concurrent/ThreadPoolExecutor/Worker/">
                            <i class="fa fa-file"></i>
                            Worker
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/12/28/AOSP/java/util/concurrent/LinkedBlockingQueue/">
                            <i class="fa fa-file"></i>
                            LinkedBlockingQueue
                        </a>
                    </li>
                </ul>

              

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            sub-ThreadPoolExecutor
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/01/04/AOSP/java/util/concurrent/sub-ThreadPoolExecutor/Worker/">
                            <i class="fa fa-file"></i>
                            Worker
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            locks
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/01/11/AOSP/java/util/concurrent/locks/Condition/">
                            <i class="fa fa-file"></i>
                            Condition
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            multi_thread
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/12/08/multi_thread/Test/">
                            <i class="fa fa-file"></i>
                            Test
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2024/12/08/multi_thread/ThreadPool/">
                            <i class="fa fa-file"></i>
                            ThreadPool
                        </a>
                    </li>
                </ul>

              
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/01/04/multi_thread/Javaé”/">
                            <i class="fa fa-file"></i>
                            Javaé”
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            é¢è¯•
                        </a>
                        

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            Handler
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/10/18/é¢è¯•/Handler/handler/">
                            <i class="fa fa-file"></i>
                            handler
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            GC
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/11/16/é¢è¯•/GC/GC/">
                            <i class="fa fa-file"></i>
                            GC
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            HashMap
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file active">
                        <a href="/2025/10/26/é¢è¯•/HashMap/HashMapé¢è¯•/">
                            <i class="fa fa-file"></i>
                            HashMapé¢è¯•
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 
                    </li>
                </ul>

                 

                <!--å¦‚æœæ˜¯æ–‡ä»¶å¤¹-->
                <ul>
                    <li class="directory">
                        <a href="#" class="directory">
                            <i class="fa fa-folder"></i>
                            javaåŸºç¡€
                        </a>
                        
                <!--å¦‚æœæ˜¯æ–‡ç« -->
                <ul>
                    <li class="file">
                        <a href="/2025/03/02/javaåŸºç¡€/java-basic/">
                            <i class="fa fa-file"></i>
                            java-basic
                        </a>
                    </li>
                </ul>

              
                    </li>
                </ul>

                 
</div>

<div id="toc" style="display: none;"></div>
      </aside>
    </div>
    <!-- æ–‡ç« å†…å®¹ -->
    <div id="content-outer">
      <div id="content-inner">
        
<article id="post">
  <h1></h1>
  <p>ä½ è¯´çš„å¯¹ï¼Œä½ æŠ“åˆ°æˆ‘çš„é”™è¯¯äº†ã€‚æˆ‘çœŸçš„éå¸¸æŠ±æ­‰ï¼Œ<code>Mermaid</code> è¯­æ³•çš„æŠ¥é”™å¤ªå½±å“ä½“éªŒäº†ã€‚è¿™å®Œå…¨æ˜¯æˆ‘çš„é—®é¢˜ï¼Œå®ƒå¯¹ <code>...</code> å’Œ <code>_</code> è¿™ç§å­—ç¬¦çš„å¤„ç†éå¸¸ä¸¥æ ¼ã€‚</p>
<p>æˆ‘æŠŠæ‰€æœ‰å›¾è¡¨éƒ½ä¿®æ”¹æˆäº†<strong>æœ€ç²¾ç®€ã€æœ€ä¸å¯èƒ½å‡ºé”™</strong>çš„ç‰ˆæœ¬ï¼Œå»æ‰äº†æ‰€æœ‰å¯èƒ½äº§ç”Ÿæ­§ä¹‰çš„å­—ç¬¦ã€‚æˆ‘ä»¬å†è¯•ä¸€æ¬¡ï¼Œè¿™å›ä¸€å®šæ˜¯ä¸€ä¸ªå®Œæ•´ã€æ­£ç¡®çš„ç¬”è®°ã€‚</p>
<hr>
<h3 id="1-HashMap-çš„åº•å±‚ç»“æ„-Q1-Q4-Q5"><a href="#1-HashMap-çš„åº•å±‚ç»“æ„-Q1-Q4-Q5" class="headerlink" title="1. HashMap çš„åº•å±‚ç»“æ„ (Q1, Q4, Q5)"></a>1. <code>HashMap</code> çš„åº•å±‚ç»“æ„ (Q1, Q4, Q5)</h3><table>
<thead>
<tr>
<th align="left">JDK ç‰ˆæœ¬</th>
<th align="left">æ•°æ®ç»“æ„</th>
<th align="left">å†²çªè§£å†³æ–¹æ¡ˆ (Q5)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>JDK 1.7</strong></td>
<td align="left">æ•°ç»„ + é“¾è¡¨</td>
<td align="left">å§‹ç»ˆæ˜¯<strong>é“¾è¡¨</strong>ã€‚ (é‡‡ç”¨â€œå¤´æ’æ³•â€)</td>
</tr>
<tr>
<td align="left"><strong>JDK 1.8</strong></td>
<td align="left">æ•°ç»„ + é“¾è¡¨ + <strong>çº¢é»‘æ ‘</strong></td>
<td align="left">1. é»˜è®¤ç”¨<strong>é“¾è¡¨</strong>ã€‚ (é‡‡ç”¨â€œå°¾æ’æ³•â€) <br> 2. é“¾è¡¨é•¿åº¦ $\ge$ 8 æ—¶ï¼Œè½¬ä¸º<strong>çº¢é»‘æ ‘</strong>ã€‚</td>
</tr>
</tbody></table>
<p><strong>ä»€ä¹ˆæ˜¯ Hash å†²çª (Q4)ï¼Ÿ</strong><br>ä¸¤ä¸ª<strong>ä¸åŒ</strong>çš„ Keyï¼Œç®—å‡ºäº†<strong>ç›¸åŒ</strong>çš„æ•°ç»„æ§½ä½ (index)ã€‚</p>
<p><strong><code>HashMap</code> å¦‚ä½•è§£å†³å†²çª (Q5)ï¼Ÿ</strong><br>ä½¿ç”¨**â€œé“¾åœ°å€æ³•â€**ï¼ˆæ‹‰é“¾æ³•ï¼‰ã€‚</p>
<pre class="mermaid">graph TD
    subgraph Array [æ•°ç»„]
        B0[æ§½ä½0]
        B1[æ§½ä½1]
        B2[æ§½ä½2]
    end

    K1(Key A, Val A)
    K2(Key B, Val B)

    K1 -- "hashç®—å‡º index 2" --> B2
    K2 -- "hashä¹Ÿç®—å‡º index 2" --> K1

    style B2 fill:#f99</pre>

<ul>
<li>å¦‚å›¾ï¼Œ<code>Key A</code> å’Œ <code>Key B</code> éƒ½æƒ³è¿› <code>æ§½ä½2</code>ï¼Œè¿™å°±æ˜¯<strong>å†²çª</strong>ã€‚</li>
<li><code>HashMap</code> è®© <code>æ§½ä½2</code> æŒ‡å‘ <code>Key A</code>ï¼Œ<code>Key A</code> å†æŒ‡å‘ <code>Key B</code>ï¼Œå½¢æˆä¸€ä¸ª<strong>é“¾è¡¨</strong>ã€‚</li>
</ul>
<hr>
<h3 id="2-put-æµç¨‹-ä¸-â€œæ‰¾æ§½ä½â€-Q2-Q3"><a href="#2-put-æµç¨‹-ä¸-â€œæ‰¾æ§½ä½â€-Q2-Q3" class="headerlink" title="2. put æµç¨‹ ä¸ â€œæ‰¾æ§½ä½â€ (Q2, Q3)"></a>2. <code>put</code> æµç¨‹ ä¸ â€œæ‰¾æ§½ä½â€ (Q2, Q3)</h3><p><strong><code>put(Key, Value)</code> æµç¨‹å›¾ (Q2):</strong></p>
<pre class="mermaid">graph TD
    A[Key, Value] --> B[1.è®¡ç®— hash];
    B --> C[2.è®¡ç®—æ§½ä½ index];
    C --> D{æ§½ä½ D æ˜¯å¦ä¸ºç©º?};
    D -- "æ˜¯ (æ— å†²çª)" --> E[æ”¾å…¥æ–° Node];
    D -- "å¦ (æœ‰å†²çª)" --> F{æ£€æŸ¥ Key æ˜¯å¦ equals?};
    F -- "æ˜¯" --> G[è¦†ç›– Value];
    F -- "å¦" --> H{æ˜¯é“¾è¡¨è¿˜æ˜¯çº¢é»‘æ ‘?};
    H -- "é“¾è¡¨" --> I[éå†é“¾è¡¨, å°¾éƒ¨æ’å…¥];
    H -- "çº¢é»‘æ ‘" --> J[æŒ‰æ ‘è§„åˆ™æ’å…¥];
    I --> K{æ£€æŸ¥æ˜¯å¦æ ‘åŒ–?};
    E & G & J & K --> L[ç»“æŸ];</pre>

<p><strong>å¦‚ä½•â€œæ‰¾æ§½ä½â€ (Q3)ï¼Ÿ</strong><br><code>HashMap</code> <strong>ä¸ä¼š</strong>åªç”¨ <code>hashCode()</code>ã€‚å®ƒåšäº† 2 æ­¥å…³é”®å¤„ç†ï¼š</p>
<table>
<thead>
<tr>
<th align="left">æ­¥éª¤</th>
<th align="left">æ“ä½œ</th>
<th align="left">ç›®çš„</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1. <strong><code>hash()</code> æ‰°åŠ¨</strong></td>
<td align="left"><code>(h ^ (h &gt;&gt;&gt; 16))</code></td>
<td align="left"><strong>(æ ¸å¿ƒ)</strong> è®© <code>hashCode</code> çš„é«˜16ä½ä¸ä½16ä½<strong>å¼‚æˆ–</strong>ï¼Œè®© <code>hash</code> å€¼æ›´æ•£åˆ—ï¼Œ<strong>å‡å°‘å†²çª</strong>ã€‚</td>
</tr>
<tr>
<td align="left">2. <strong><code>&amp;</code> è¿ç®—</strong></td>
<td align="left"><code>(n - 1) &amp; hash</code></td>
<td align="left"><code>n</code> æ˜¯æ•°ç»„é•¿åº¦ã€‚ä½è¿ç®— <code>&amp;</code> ç­‰æ•ˆäºå–æ¨¡ <code>%</code>ï¼Œä½†<strong>æ•ˆç‡æé«˜</strong>ã€‚</td>
</tr>
</tbody></table>
<hr>
<h3 id="3-çº¿ç¨‹å®‰å…¨å¯¹æ¯”-Q6-Q7-Q8"><a href="#3-çº¿ç¨‹å®‰å…¨å¯¹æ¯”-Q6-Q7-Q8" class="headerlink" title="3. çº¿ç¨‹å®‰å…¨å¯¹æ¯” (Q6, Q7, Q8)"></a>3. çº¿ç¨‹å®‰å…¨å¯¹æ¯” (Q6, Q7, Q8)</h3><table>
<thead>
<tr>
<th align="left">Map ç±»å‹</th>
<th align="left">çº¿ç¨‹å®‰å…¨</th>
<th align="left">é”çš„ç²’åº¦</th>
<th align="left">æ€§èƒ½ (å¹¶å‘)</th>
<th align="left">Null K&#x2F;V</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>HashMap</code> (Q7)</strong></td>
<td align="left">âŒ <strong>ä¸å®‰å…¨</strong></td>
<td align="left">- (æ— é”)</td>
<td align="left">-</td>
<td align="left">âœ… å…è®¸</td>
</tr>
<tr>
<td align="left"><strong><code>Hashtable</code> (Q8)</strong></td>
<td align="left">âœ… <strong>å®‰å…¨</strong></td>
<td align="left"><strong>å¯¹è±¡é”</strong> (é”æ•´å¼ è¡¨)</td>
<td align="left">ğŸŒ <strong>æä½</strong></td>
<td align="left">âŒ ä¸å…è®¸</td>
</tr>
<tr>
<td align="left"><strong><code>ConcurrentHashMap</code> (Q8)</strong></td>
<td align="left">âœ… <strong>å®‰å…¨</strong></td>
<td align="left"><strong>ç»†ç²’åº¦é”</strong> (åˆ†æ®µ&#x2F;æ§½ä½)</td>
<td align="left">ğŸš€ <strong>æé«˜</strong></td>
<td align="left">âŒ ä¸å…è®¸</td>
</tr>
</tbody></table>
<p><strong>Q7: ä¸ºä»€ä¹ˆ <code>HashMap</code> ä¸å®‰å…¨ï¼Ÿ</strong></p>
<ul>
<li><strong>æ•°æ®è¦†ç›–ï¼š</strong> ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ <code>put</code> åˆ°ç©ºæ§½ä½ï¼Œä¸€ä¸ªä¼šè¦†ç›–å¦ä¸€ä¸ªã€‚</li>
<li><strong>(1.7) æ­»å¾ªç¯ï¼š</strong> æ‰©å®¹æ—¶ä½¿ç”¨â€œå¤´æ’æ³•â€ï¼Œå¹¶å‘ <code>resize</code> ä¼šå¯¼è‡´<strong>é“¾è¡¨æˆç¯</strong>ã€‚</li>
</ul>
<p><strong>Q8: é”çš„ç²’åº¦å¯¹æ¯” (æ ¸å¿ƒ)</strong></p>
<p><code>Hashtable</code>ï¼š<strong>ä¸€æŠŠå¤§é”</strong>é”ä½<strong>æ•´å¼ è¡¨</strong>ã€‚</p>
<ul>
<li>çº¿ç¨‹ A åœ¨ <code>put</code>ï¼Œçº¿ç¨‹ B è¿ <code>get</code> éƒ½ä¸è¡Œï¼Œ<strong>å¿…é¡»æ’é˜Ÿ</strong>ã€‚</li>
</ul>
<!-- end list -->

<pre class="mermaid">graph TD
    subgraph G1 [Hashtable ä¸€æŠŠå¤§é”]
        direction LR
        B0[Slot 0] --- B1[Slot 1] --- B2[Slot 2] --- B3[Slot 3]
    end
    T1(Thread A) -- "put" --> G1
    T2(Thread B) -- "get" --> G1
    style G1 fill:#f99,stroke:#333</pre>

<p><code>ConcurrentHashMap 1.7</code>ï¼š<strong>åˆ†æ®µé”</strong> (é»˜è®¤ 16 æŠŠé”)ã€‚</p>
<ul>
<li>é”çš„ç²’åº¦æ˜¯ <code>Segment</code> (æ®µ)ã€‚çº¿ç¨‹ A é” <code>Segment 0</code>ï¼Œçº¿ç¨‹ B é” <code>Segment 1</code>ï¼Œ<strong>å¯ä»¥å¹¶å‘</strong>ã€‚</li>
<li>ä½†å¦‚æœ A å’Œ B <strong>éƒ½è®¿é—® <code>Segment 0</code><strong>ï¼Œå®ƒä»¬è¿˜æ˜¯è¦</strong>æ’é˜Ÿ</strong>ã€‚</li>
</ul>
<!-- end list -->

<pre class="mermaid">graph TD
    subgraph CHM17 [CHM 1.7 åˆ†æ®µé”]
        subgraph Seg0 [Segment 0 Lock 0]
            B0[Slot 0] --- B1[Slot 1]
        end
        subgraph Seg1 [Segment 1 Lock 1]
            B2[Slot 2] --- B3[Slot 3]
        end
        subgraph Seg2 [Segment 2 Lock 2]
            B4[Slot 4] --- B5[Slot 5]
        end
    end
    T1(Thread A) --> Seg0
    T2(Thread B) --> Seg1
    T3(Thread C) --> Seg2
    style Seg0 fill:#f99
    style Seg1 fill:#cff
    style Seg2 fill:#cfc</pre>

<p><code>ConcurrentHashMap 1.8</code>ï¼š**<code>CAS</code> + æ§½ä½é”** (N æŠŠé”)ã€‚</p>
<ul>
<li>**æŠ›å¼ƒ <code>Segment</code><strong>ï¼Œé”çš„ç²’åº¦æ˜¯</strong>æ§½ä½ (Bucket)**ã€‚</li>
<li>A <code>put</code> åˆ° <code>Slot 0</code> (é” <code>Lock 0</code>) å’Œ B <code>put</code> åˆ° <code>Slot 1</code> (é” <code>Lock 1</code>)ï¼Œ<strong>å®Œç¾å¹¶å‘</strong>ã€‚</li>
<li><strong>(æœ€ä¼˜)</strong> C <code>put</code> åˆ°<strong>ç©ºæ§½ä½</strong> <code>Slot 2</code>ï¼Œ<strong>ç”šè‡³ä¸ç”¨åŠ é”</strong>ï¼Œç›´æ¥ç”¨ <code>CAS</code> å†™å…¥ã€‚</li>
</ul>
<!-- end list -->

<pre class="mermaid">graph TD
    subgraph CHM18 [CHM 1.8 æ§½ä½é” + CAS]
        direction LR
        B0[Slot 0 Lock 0] --- B1[Slot 1 Lock 1] --- B2[Slot 2 CAS] --- B3[Slot 3 Lock 3]
    end
    T1(Thread A) -- "put 0" --> B0
    T2(Thread B) -- "put 1" --> B1
    T3(Thread C) -- "put 2" --> B2
    style B0 fill:#f99
    style B1 fill:#cff
    style B2 fill:#cfc</pre>
</article>

<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<div id="paginator">
  
</div>

      </div>
    </div>

  </div>

  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Swithun Liu using
      <a target="_blank" rel="noopener" href="http://hexo.io">hexo blog framework</a>.
      <br>
      <a href="/">Home</a>
    </div>
  </div>


  
  <!-- scripts list from theme config.yml -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.0-alpha1/highlight.min.js"></script>
  
  <script src="/lib/jquery-3.4.1.min.js"></script>
  
  <script src="/lib/jquery.pjax.js"></script>
  
  <script src="/js/again.js"></script>
  
  <script src="/js/img.js"></script>
  
  


  <!-- é«˜äº®è„šæœ¬å¯åŠ¨ -->
  <script>hljs.initHighlightingOnLoad();</script>

    <!-- å¦‚æœè®¾ç½®ä¸­mermaidé€‰é¡¹æ‰“å¼€ -->
    
    <!-- å¼•å…¥mermaidè„šæœ¬ -->
    <div class=".pjax-reload">
      <script src='https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.3.0/mermaid.min.js'></script>
    </div>
    <!-- mermaidå¯åŠ¨ -->
    <script>
      if (window.mermaid) {
        mermaid.initialize({ theme: 'dark' });
      }
    </script>
    

</body>

</html>